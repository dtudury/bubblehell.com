{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","node_modules/browserify/node_modules/events/events.js","src/DumbSet.js","src/Point.js","src/Quad.js","src/QuadTree.js","src/RoundThing.js","src/Thing.js","src/controller/DoubleJoystick.js","src/controller/KeyboardControl.js","src/controller/MouseControl.js","src/controller/MouseLock.js","src/controller/QuadTreeDebug.js","src/index.js","src/model/World.js","src/view/Board.js"],"names":[],"mappings":"AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;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","file":"bundle.js","sourceRoot":"/source/","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      }\n      throw TypeError('Uncaught, unspecified \"error\" event.');\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    args = Array.prototype.slice.call(arguments, 1);\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (listeners) {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.prototype.listenerCount = function(type) {\n  if (this._events) {\n    var evlistener = this._events[type];\n\n    if (isFunction(evlistener))\n      return 1;\n    else if (evlistener)\n      return evlistener.length;\n  }\n  return 0;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  return emitter.listenerCount(type);\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n","\nexport default class DumbSet {\n    constructor(...startingMembers) {\n        this.members = [];\n        startingMembers.forEach(member => this.add(member));\n    }\n\n    add(member) {\n        if (this.members.indexOf(member) >= 0) return false;\n        this.members.push(member);\n        return true;\n    }\n\n    remove(member) {\n        var i = this.members.indexOf(member);\n        if (i < 0) return false;\n        this.members.splice(i, 1);\n        return true;\n    }\n\n    get length() {\n        return this.members.length;\n    }\n\n    forEach(f) {\n        return this.members.forEach(f);\n    }\n}\n","\nexport default class Point {\n    constructor (x, y) {\n        this.x = x;\n        this.y = y;\n    }\n\n    static distance (p1, p2) {\n        return Math.sqrt(Point.distance_squared(p1, p2));\n    }\n\n    static distance_squared (p1, p2) {\n        return Math.pow(p1.x - p2.x, 2) + Math.pow(p1.y - p2.y, 2);\n    }\n}\n","\nimport Point from \"./Point.js\";\n\nexport default class Quad {\n    constructor (x, y, width, height) {\n        this.x = x;\n        this.y = y;\n        this.width = width;\n        this.height = height;\n    }\n\n    get left () {\n        return this.x;\n    }\n\n    get top () {\n        return this.y;\n    }\n\n    get right () {\n        return this.x + this.width;\n    }\n\n    get bottom () {\n        return this.y + this.height;\n    }\n\n    get tl () {\n        return new Point(this.left, this.top);\n    }\n\n    get tr () {\n        return new Point(this.right, this.top);\n    }\n\n    get bl () {\n        return new Point(this.left, this.bottom);\n    }\n\n    get br () {\n        return new Point(this.right, this.bottom);\n    }\n\n    overlaps(quad) {\n        return Quad.overlaps(this, quad);\n    }\n\n    overlaps_point(p) {\n        return Quad.overlaps_point(this, p);\n    }\n\n    static overlaps(a, b) {\n        return a.left < b.right && \n            a.right > b.left &&\n            a.top < b.bottom &&\n            a.bottom > b.top;\n    }\n\n    static overlaps_point(q, p) {\n        return p.x > q.left &&\n            p.x < q.right &&\n            p.y > q.top &&\n            p.y < q.bottom;\n    }\n}\n","\nimport Quad from \"./Quad.js\";\nimport Set from \"./DumbSet.js\";\n\nexport default class QuadTree extends Quad {\n    constructor (x = 0, y = 0, size = 400, capacity = 2, max_levels = 8) {\n        super (x, y, size, size);\n        this.size = size;\n        this.capacity = capacity;\n        this.max_levels = max_levels;\n        this.bucket = new Set();\n        this.nodes = null;\n        this.things = new Set();\n    }\n\n    add (thing) {\n        if (!thing.overlaps_quad(this)) return;\n        if (!this.things.add(thing)) return;\n        if (this.bucket) {\n            if (this.bucket.length < this.capacity || !this.max_levels) {\n                this.bucket.add(thing);\n                thing.quads.add(this);\n                return;\n            }\n            this.split();\n        }\n        for (let x = 0; x < 2; x++) {\n            for (let y = 0; y < 2; y++) {\n                this.nodes[x][y].add(thing);\n            }\n        }\n    }\n\n    remove (thing) {\n        if (!this.things.remove(thing)) return;\n        if (this.bucket) {\n            this.bucket.remove(thing);\n            thing.quads.remove(this);\n        } else {\n            let remove_from_nodes = thing => {\n                for (let x = 0; x < 2; x++) {\n                    for (let y = 0; y < 2; y++) {\n                        this.nodes[x][y].remove(thing);\n                    }\n                }\n            }\n            remove_from_nodes(thing);\n            if (this.things.length <= this.capacity) {\n                this.things.forEach(remove_from_nodes);\n                delete this.nodes;\n                this.bucket = new Set();\n                this.things.forEach(thing => {this.bucket.add(thing)});\n            }\n        }\n    }\n\n    get_thing_at(x, y) {\n        let p = {x:x, y:y};\n        let found_thing = null;\n        if (!this.overlaps_point(p)) return found_thing;\n        if (this.bucket) {\n            this.bucket.forEach(thing => {\n                if (thing.overlaps_point(p)) found_thing = thing;\n            });\n            return found_thing;\n        }\n        for (let i = 0; i < 2; i++) {\n            for (let j = 0; j < 2; j++) {\n                found_thing = found_thing || this.nodes[i][j].get_thing_at(x, y);\n            }\n        }\n        return found_thing;\n        \n    }\n\n    split() {\n        let half_size = this.size / 2;\n        this.nodes = [];\n        for (let x = 0; x < 2; x++) {\n            this.nodes[x] = [];\n            for (let y = 0; y < 2; y++) {\n                let qt = new QuadTree(\n                    this.x + half_size * x,\n                    this.y + half_size * y,\n                    half_size,\n                    this.capacity,\n                    this.max_levels - 1\n                );\n                this.nodes[x][y] = qt;\n                this.bucket.forEach(t => qt.add(t));\n            }\n        }\n        delete this.bucket;\n    }\n}\n","\nimport Quad from \"./Quad.js\";\nimport Point from \"./Point.js\";\nimport Thing from \"./Thing.js\";\n\nexport default class RoundThing extends Thing {\n    constructor (r, x, y, dx = 0, dy = 0, ax = 0, ay = 0) {\n        super();\n        this.r = r;\n        this.x = x;\n        this.y = y;\n        this.dx = dx;\n        this.dy = dy;\n        this.ax = ax;\n        this.ay = ay;\n    }\n\n    get left () {\n        return this.x - this.r;\n    }\n\n    get top () {\n        return this.y - this.r;\n    }\n\n    get right () {\n        return this.x + this.r;\n    }\n\n    get bottom () {\n        return this.y + this.r;\n    }\n\n    overlaps_quad(quad) {\n        return Quad.overlaps(this, quad) &&\n            RoundThing.overlaps_circle_and_quad(this, quad);\n    }\n    \n    overlaps_point(p) {\n        return RoundThing.overlaps_circle_and_point(this, p);\n    }\n\n    static overlaps_circle_and_quad(c, q) {\n        if (c.x > q.left && c.x < q.right)\n            return c.y + c.r > q.top && c.y - c.r < q.bottom;\n        if (c.y > q.top && c.y < q.bottom)\n            return c.x + c.r > q.left && c.x - c.r < q.right;\n        let r2 = Math.pow(c.r);\n        return Point.distance_squared(c, q.tl) < r2 ||\n            Point.distance_squared(c, q.tr) < r2 ||\n            Point.distance_squared(c, q.bl) < r2 ||\n            Point.distance_squared(c, q.br) < r2;\n\n    }\n\n    static overlaps_circle_and_circle(c1, c2) {\n        return Point.distance_squared(c1, c2) < Math.pow(c1.r + c2.r, 2);\n    }\n\n    static overlaps_circle_and_point(c, p) {\n        return Point.distance_squared(c, p) < Math.pow(c.r, 2);\n    }\n}\n","\nimport Set from \"./DumbSet\";\n\nexport default class Thing {\n    constructor() {\n        this.quads = new Set();\n    }\n}\n","\nimport EventEmitter from \"events\";\nimport * as KeyboardControl from \"./KeyboardControl.js\";\nimport * as MouseControl from \"./MouseControl.js\";\nimport * as MouseLock from \"./MouseLock.js\";\n\n/*********** I guess we're using turn/8 as our angle unit\n * 5  6  7 *\n *  \\ | /  *\n *   \\|/   *\n * 4-- --0 *\n *   /|\\   *\n *  / | \\  *\n * 3  2  1 *\n ***********/\n\nlet _trig = {\n    0:{x: 1,            y: 0           },\n    1:{x: Math.SQRT1_2, y: Math.SQRT1_2},\n    2:{x: 0,            y: 1           },\n    3:{x:-Math.SQRT1_2, y: Math.SQRT1_2},\n    4:{x:-1,            y: 0           },\n    5:{x:-Math.SQRT1_2, y:-Math.SQRT1_2},\n    6:{x: 0,            y:-1           },\n    7:{x: Math.SQRT1_2, y:-Math.SQRT1_2}\n};\n\nlet _atrig = {\n    [-1]:{[-1]:5, [ 0]:6,   [ 1]:7},\n    [ 0]:{[-1]:4, [ 0]:null,[ 1]:0},\n    [ 1]:{[-1]:3, [ 0]:2,   [ 1]:1}\n};\n\n\nlet _locked = false;\nlet _micro_angle = 0;\nlet mangle = _trig[0];\nlet kangle = {x:0, y:0};\n\nexport function calculate_arrow(p) {\n    if (p.y < 0) {\n        if (p.x < 0) return \"↖\";\n        if (p.x > 0) return \"↗\";\n        return \"↑\";\n    }\n    if (p.y > 0) {\n        if (p.x < 0) return \"↙\";\n        if (p.x > 0) return \"↘\";\n        return \"↓\";\n    } \n    if (p.x < 0) return \"←\";\n    if (p.x > 0) return \"→\";\n    return \"·\";\n}\n\nKeyboardControl.emitter.on(KeyboardControl.CHORD, (chord, ts) => {\n    let x = 0;\n    let y = 0;\n    let left = +!!(~chord.indexOf(37) || ~chord.indexOf(65));\n    let up = +!!(~chord.indexOf(38) || ~chord.indexOf(87));\n    let right = +!!(~chord.indexOf(39) || ~chord.indexOf(68));\n    let down = +!!(~chord.indexOf(40) || ~chord.indexOf(83));\n    if (left ^ right) {\n        if (left) x = -1;\n        else x = 1;\n    }\n    if (up ^ down) {\n        if (up) y = -1;\n        else y = 1;\n    }\n    if (x && y) {\n        x *= Math.SQRT1_2;\n        y *= Math.SQRT1_2;\n    }\n    kangle = {x:x, y:y};\n    emitter.emit(MOVE, kangle, mangle, ts);\n});\nMouseLock.emitter.on(MouseLock.LOCKED, ts => {\n    _locked = true;\n});\nMouseLock.emitter.on(MouseLock.UNLOCKED, ts => {\n    _locked = false;\n});\nMouseControl.emitter.on(MouseControl.MOVE, (dx, dy, ts) => {\n    //if (!_locked) return;\n    let r = 320; //just feels about right to me...\n    _micro_angle = ((_micro_angle + dx) % r + r) % r;\n    let angle = _trig[Math.floor(_micro_angle / r * 8)];\n    if (mangle === angle) return;\n    mangle = angle;\n    emitter.emit(MOVE, kangle, mangle, ts);\n});\n\nexport const MOVE = \"move\";\nexport const emitter = new EventEmitter();\n","import EventEmitter from \"events\";\nimport Set from \"../DumbSet.js\";\n\nlet _set = new Set();\n\nfunction update_direction(e, state) {\n    let keyCode = (e || window.event).keyCode;\n    if (e.type === \"keyup\") {\n        if(!_set.remove(keyCode)) return;\n    } else if (e.type === \"keydown\") {\n        if(!_set.add(keyCode)) return;\n    }\n    emitter.emit(CHORD, _set.members, e.timeStamp);\n}\n\nwindow.addEventListener(\"keydown\", update_direction);\nwindow.addEventListener(\"keyup\", update_direction);\n\nexport const CHORD = \"chord\";\nexport const emitter = new EventEmitter();\n","\nimport EventEmitter from \"events\";\n\ndocument.addEventListener(\"mousemove\", e => {\n    let dx = e.movementX || e.mozMovementX || 0;\n    let dy = e.movementY || e.mozMovementY || 0;\n    if (dx || dy) emitter.emit(MOVE, dx, dy, e.timeStamp);\n});\n\nexport const MOVE = \"look\";\nexport const emitter = new EventEmitter();\n","\nimport EventEmitter from \"events\";\n\nexport let locked = false;\n\nfunction get_pointerLockElement() {\n    return document.pointerLockElement || document.mozPointerLockElement || document.webkitPointerLockElement;\n}\n\nfunction update_pointerlock(e, element) {\n    let pointerLockElement = get_pointerLockElement();\n    if (locked === !!pointerLockElement) return;\n    locked = !!pointerLockElement;\n    emitter.emit(pointerLockElement ? LOCKED : UNLOCKED, e.timeStamp);\n}\n\n\nexport function set (element) {\n    let event_name = \"pointerlockchange\";\n    if (\"onmozpointerlockchange\" in document) event_name = \"mozpointerlockchange\";\n    else if (\"onwebkitpointerlockchange\" in document) event_name = \"webkitpointerlockchange\";\n    document.addEventListener(event_name, e => update_pointerlock(e, element));\n    element.addEventListener(\"click\", e => element.requestPointerLock());\n}\n\nexport const LOCKED = \"locked\";\nexport const UNLOCKED = \"unlocked\";\nexport const emitter = new EventEmitter();\n","import {quadtree} from \"../model/World.js\";\nimport RoundThing from \"../RoundThing.js\";\n\nexport default function (element, board) {\n    element.addEventListener(\"click\", e => {\n        var p = board.reverse_map(e.x, e.y)\n        var thing = quadtree.get_thing_at(p.x, p.y);\n        if (thing) {\n            quadtree.remove(thing);\n        } else {\n            let w = 400;\n            let h = 300;\n            let r = Math.random() * 4 + 1;\n            let angle = Math.random() * 2 * Math.PI;\n            let speed = Math.random() * 5 + 2;\n            let dx = Math.cos(angle) * speed;\n            let dy = Math.sin(angle) * speed;\n            let thing = new RoundThing(r, p.x, p.y, dx, dy);\n            quadtree.add(thing);\n        }\n    });\n}\n","\nimport Board from \"./view/Board.js\";\nimport {set as setMouseLock} from \"./controller/MouseLock.js\";\nimport QuadTreeDebug from \"./controller/QuadTreeDebug.js\";\n\nwindow.onload = () => {\n    let _canvas = document.createElement(\"canvas\");\n    if (!_canvas.getContext) window.alert (\"no getContext...\");//catastrophic failure\n    document.body.appendChild(_canvas);\n    let _board = new Board(_canvas.getContext(\"2d\"));\n\n    function handle_resize () {\n        _canvas.width = window.innerWidth;\n        _canvas.height = window.innerHeight;\n        _board.resize(window.innerWidth, window.innerHeight);\n    }\n    window.addEventListener(\"resize\", handle_resize);\n    handle_resize();\n\n    //setMouseLock(_canvas);\n    QuadTreeDebug(_canvas, _board);\n};\n","\nimport RoundThing from \"../RoundThing.js\";\nimport QuadTree from \"../QuadTree.js\";\n\nimport * as DoubleJoystick from \"../controller/DoubleJoystick.js\"\n\nDoubleJoystick.emitter.on(DoubleJoystick.MOVE, (k, m, ts) => {\n    console.log(DoubleJoystick.calculate_arrow(k),\n        DoubleJoystick.calculate_arrow(m), ts);\n});\n\n\n\n\nlet w = 400;\nlet h = 300;\nexport let quadtree = new QuadTree(0, 0, Math.max(w, h));\n\nfor (let i = 0; i < 40; i++) {\n    let r = Math.random() * 4 + 1;\n    let x = Math.random() * (w - 2 * r) + r;\n    let y = Math.random() * (h - 2 * r) + r;\n    let angle = Math.random() * 2 * Math.PI;\n    let speed = Math.random() * 5 + 2;\n    let dx = Math.cos(angle) * speed;\n    let dy = Math.sin(angle) * speed;\n    let thing = new RoundThing(r, x, y, dx, dy);\n    let no_collision = true;\n    quadtree.things.members.forEach(thing2 => {\n        if (RoundThing.overlaps_circle_and_circle(thing, thing2)) {\n            no_collision = false;\n        }\n    });\n    if (no_collision) quadtree.add(thing);\n}\n","\nimport {quadtree} from \"../model/World.js\";\nimport Quad from \"../Quad.js\";\n\nconst _SCALE = Symbol();\n\nexport default class Board {\n    constructor (context, vwidth = 400, vheight = 300) {\n        this.context = context;\n        this.vwidth = vwidth; //let's pretend this is the width when talking to Board\n        this.vheight = vheight; //let's pretend this is the height when talking to Board\n        this.inner = new Quad(0, 0, vwidth, vheight);\n        this[_SCALE] = 1\n        let redraw_loop = () => {\n            this.redraw();\n            window.requestAnimationFrame(redraw_loop);\n        }\n        window.requestAnimationFrame(redraw_loop);\n    }\n\n    resize (width, height) {\n        this.windowWidth = width;\n        this.windowHeight = height;\n        //size to fit\n        let inner_ratio = this.vwidth / this.vheight;\n        let outer_ratio = width / height;\n        this.inner.x = 0;\n        this.inner.y = 0;\n        this.inner.width = width;\n        this.inner.height = height;\n        if (outer_ratio > inner_ratio) {\n            //window is too wide;\n            this.inner.width = Math.floor(height * inner_ratio);\n            this.inner.x = Math.floor((width - this.inner.width) / 2);\n        } else {\n            //window is too tall;\n            this.inner.height = Math.floor(width / inner_ratio);\n            this.inner.y = Math.floor((height - this.inner.height) / 2);\n        }\n        this[_SCALE] = this.inner.width / this.vwidth;\n        this.redraw();\n    }\n\n    redraw () {\n        this.context.clearRect(0,0,this.windowWidth,this.windowHeight);\n        this.context.strokeWidth = 1;\n        let draw_quadtree = (quadtree) => {\n            if (quadtree.nodes) {\n                let middle = this.map(quadtree.x + quadtree.width / 2, quadtree.y + quadtree.height / 2);\n                let tl = this.map(quadtree.x, quadtree.y);\n                let br = this.map(quadtree.x + quadtree.size, quadtree.y + quadtree.size);\n                this.context.beginPath();\n                this.context.moveTo(middle.x, tl.y);\n                this.context.lineTo(middle.x, br.y);\n                this.context.moveTo(tl.x, middle.y);\n                this.context.lineTo(br.x, middle.y);\n                this.context.stroke();\n                for (let x = 0; x < 2; x++) {\n                    for (let y = 0; y < 2; y++) {\n                        draw_quadtree(quadtree.nodes[x][y]);\n                    }\n                }\n            }\n        }\n\n        this.context.strokeStyle = \"rgb(200,200,255)\";\n        draw_quadtree(quadtree);\n        this.context.strokeStyle = \"green\";\n        quadtree.things.members.forEach(thing => {\n            this.context.beginPath();\n            let p = this.map(thing.x, thing.y);\n            let r = this.scale(thing.r);\n            this.context.arc(p.x, p.y, r, 0, Math.PI*2, true);\n            this.context.stroke();\n        });\n\n        this.context.strokeStyle = \"blue\";\n        this.context.strokeWidth = 3;\n        let origin = this.map(0, 0);\n        this.context.strokeStyle = \"black\";\n        this.context.strokeRect(origin.x, origin.y, this.scale(this.vwidth), this.scale(this.vheight));\n    }\n\n    map (x, y) {\n        return {x: this.inner.x + this.scale(x), y: this.inner.y + this.scale(y)};\n    }\n\n    reverse_map (x, y) {\n        return {x: this.reverse_scale(x - this.inner.x), y: this.reverse_scale(y - this.inner.y)};\n    }\n\n    scale (v) {\n        return this[_SCALE] * v;\n    }\n\n    reverse_scale (v) {\n        return v / this[_SCALE];\n    }\n}\n\n"]}